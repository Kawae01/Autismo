<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>üêç COBRINHA JOGO</title>
<style>
  body {
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(to bottom, #1a3d1a, #0e220e);
    height: 100vh;
    overflow: hidden;
    font-family: 'Courier New', monospace;
  }

  canvas {
    border: 10px solid #0d260d;
    background: #1e5f1e;
    display: block;
  }

  #menu {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,0.8);
    padding: 30px;
    border-radius: 20px;
    color: white;
    text-align: center;
    z-index: 2;
  }

  #menu input, #menu select, #menu button {
    margin: 8px 0;
    padding: 10px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
  }

  #score {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-size: 22px;
    font-weight: bold;
    text-shadow: 2px 2px 4px #000;
    z-index: 2;
  }
</style>
</head>
<body>

<div id="menu">
  <h1>üêç Cobrinha Jogo</h1>
  <input type="text" id="playerName" placeholder="Digite seu nome"><br>

  <label>Cor da Cobra: </label>
  <select id="snakeColor">
    <option value="yellow">Amarelo</option>
    <option value="blue">Azul</option>
    <option value="purple">Roxo</option>
    <option value="orange">Laranja</option>
    <option value="pink">Rosa</option>
  </select><br>

  <label>Modo de Jogo: </label>
  <select id="gameMode">
    <option value="classico">Cl√°ssico</option>
    <option value="infinito">Infinito</option>
    <option value="hardcoreaaa">Hardcore</option>
  </select><br>

  <button onclick="startGame()">Iniciar</button>
</div>

<div id="score"></div>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreDisplay = document.getElementById("score");
const menu = document.getElementById("menu");

function resizeCanvas() {
  canvas.width = window.innerWidth - 20;
  canvas.height = window.innerHeight - 20;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

const box = 20;
let snake = [];
let food;
let obstacles = [];
let score = 0;
let d;
let game;
let playerName;
let snakeColor;
let mode;
let particles = [];

function startGame() {
  playerName = document.getElementById("playerName").value || "Jogador";
  snakeColor = document.getElementById("snakeColor").value || "green";
  mode = document.getElementById("gameMode").value;
  menu.style.display = "none";

  snake = [{x: 10*box, y: 10*box}];
  score = 0;
  d = null;
  obstacles = [];
  particles = [];

  generateFood();
  if(mode === "hardcore") generateObstacles();

  if(game) clearInterval(game);
  game = setInterval(draw, mode === "hardcore" ? 80 : 100);
}

// Gera comida
function generateFood() {
  food = {
    x: Math.floor(Math.random() * (canvas.width / box)) * box,
    y: Math.floor(Math.random() * (canvas.height / box)) * box
  };
}

// Obst√°culos hardcore
function generateObstacles() {
  obstacles = [];
  for (let i=0;i<10;i++){
    obstacles.push({
      x: Math.floor(Math.random()*(canvas.width/box))*box,
      y: Math.floor(Math.random()*(canvas.height/box))*box
    });
  }
}

// Controles teclado
document.addEventListener("keydown", function(event){
  if(event.keyCode==37 && d!="RIGHT") d="LEFT";
  else if(event.keyCode==38 && d!="DOWN") d="UP";
  else if(event.keyCode==39 && d!="LEFT") d="RIGHT";
  else if(event.keyCode==40 && d!="UP") d="DOWN";
  else if(event.keyCode==80) paused=!paused; // P
  else if(event.keyCode==82) restartGame();   // R
});
// Controles swipe para celular
let startX, startY;
document.addEventListener("touchstart", e => {
  e.preventDefault(); // bloqueia scroll
  startX = e.touches[0].clientX;
  startY = e.touches[0].clientY;
}, {passive: false});

document.addEventListener("touchmove", e => {
  e.preventDefault(); // bloqueia scroll enquanto arrasta
}, {passive: false});

document.addEventListener("touchend", e => {
  e.preventDefault();
  let dx = e.changedTouches[0].clientX - startX;
  let dy = e.changedTouches[0].clientY - startY;
  if(Math.abs(dx) > Math.abs(dy)){
    if(dx>0 && d!="LEFT") d="RIGHT";
    else if(dx<0 && d!="RIGHT") d="LEFT";
  } else {
    if(dy>0 && d!="UP") d="DOWN";
    else if(dy<0 && d!="DOWN") d="UP";
  }
}, {passive: false});

// Pausa
let paused = false;
function restartGame() {
  clearInterval(game);
  menu.style.display = "block";
}

// Colis√£o
function collision(head,array){
  for(let i=0;i<array.length;i++){
    if(head.x==array[i].x && head.y==array[i].y) return true;
  }
  return false;
}

// Cria part√≠culas
function createParticles(x,y){
  for(let i=0;i<10;i++){
    particles.push({
      x: x + box/2,
      y: y + box/2,
      vx: (Math.random()-0.5)*2,
      vy: (Math.random()-0.5)*2,
      alpha: 1
    });
  }
}

// Desenha part√≠culas
function drawParticles(){
  for(let i=particles.length-1;i>=0;i--){
    let p = particles[i];
    ctx.fillStyle = `rgba(255,255,0,${p.alpha})`;
    ctx.beginPath();
    ctx.arc(p.x,p.y,2,0,Math.PI*2);
    ctx.fill();
    p.x += p.vx*5;
    p.y += p.vy*5;
    p.alpha -= 0.05;
    if(p.alpha <=0) particles.splice(i,1);
  }
}

// Loop principal
function draw(){
  if(paused) return;

  // Fundo quadriculado
  for(let x=0;x<canvas.width;x+=box){
    for(let y=0;y<canvas.height;y+=box){
      ctx.fillStyle=((x/box + y/box)%2==0)?"#267326":"#2e8b2e";
      ctx.fillRect(x,y,box,box);
    }
  }

  // Obst√°culos hardcore
  if(mode==="hardcore"){
    ctx.fillStyle="brown";
    obstacles.forEach(o => ctx.fillRect(o.x,o.y,box,box));
  }

  // Cobra estilo Slither.io
  ctx.lineWidth = box;
  ctx.lineCap = 'round';
  ctx.strokeStyle = snakeColor;
  if(snake.length>1){
    ctx.beginPath();
    ctx.moveTo(snake[0].x + box/2, snake[0].y + box/2);
    for(let i=1;i<snake.length;i++){
      ctx.lineTo(snake[i].x + box/2, snake[i].y + box/2);
    }
    ctx.stroke();
  } else {
    ctx.fillStyle = snakeColor;
    ctx.beginPath();
    ctx.arc(snake[0].x + box/2, snake[0].y + box/2, box/2, 0, Math.PI*2);
    ctx.fill();
  }

  // Comida estilo ma√ß√£
  let fx = food.x + box/2;
  let fy = food.y + box/2;
  // corpo vermelho
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.arc(fx, fy, box/2, 0, Math.PI*2);
  ctx.fill();
  // folha
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.moveTo(fx, fy - box/2);
  ctx.lineTo(fx - box/6, fy - box*0.7);
  ctx.lineTo(fx + box/6, fy - box*0.7);
  ctx.closePath();
  ctx.fill();
  // cabinho
  ctx.strokeStyle = "#8B4513";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(fx, fy - box/2);
  ctx.lineTo(fx, fy - box*0.8);
  ctx.stroke();

  // Desenha part√≠culas
  drawParticles();

  // Nova posi√ß√£o da cabe√ßa
  let snakeX = snake[0].x;
  let snakeY = snake[0].y;
  if(d=="LEFT") snakeX-=box;
  if(d=="UP") snakeY-=box;
  if(d=="RIGHT") snakeX+=box;
  if(d=="DOWN") snakeY+=box;

  // Modos de jogo
  if(mode==="infinite"){
    if(snakeX<0) snakeX=canvas.width-box;
    if(snakeY<0) snakeY=canvas.height-box;
    if(snakeX>=canvas.width) snakeX=0;
    if(snakeY>=canvas.height) snakeY=0;
  }

  // Comer comida
  if(snakeX==food.x && snakeY==food.y){
    score++;
    createParticles(food.x, food.y); // part√≠culas
    generateFood();
  } else {
    snake.pop();
  }

  let newHead={x:snakeX,y:snakeY};

  // Colis√µes
  if(mode!=="infinite"){
    if(snakeX<0 || snakeY<0 || snakeX>=canvas.width || snakeY>=canvas.height) return gameOver();
  }
  if(collision(newHead,snake)) return gameOver();
  if(mode==="hardcore" && collision(newHead,obstacles)) return gameOver();

  snake.unshift(newHead);

  // Placar
  scoreDisplay.innerText=`${playerName} | Modo: ${mode} | Score: ${score}`;
}

// Game Over
function gameOver(){
  clearInterval(game);
  alert(`üíÄ Game Over, ${playerName}! Pontua√ß√£o: ${score}`);
  menu.style.display="block";
}
</script>
</body>
</html>
