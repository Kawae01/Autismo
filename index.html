<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>üêç Cobrinha Bonita</title>

<!-- C√≥digo do AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6184395720701313"
     crossorigin="anonymous"></script>

<style>
  body {
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: linear-gradient(to bottom, #2c7a2c, #1e5f1e);
    height: 100vh;
    overflow: hidden;
    font-family: 'Courier New', monospace;
  }

  canvas {
    border: 5px solid black;
    background: #1e5f1e;
    display: block;
  }

  #menu {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,0.7);
    padding: 30px;
    border-radius: 20px;
    color: white;
    text-align: center;
    z-index: 2;
  }

  #menu input, #menu select, #menu button {
    margin: 10px 0;
    padding: 10px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
  }

  #score {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-size: 22px;
    font-weight: bold;
    text-shadow: 2px 2px 4px #000;
    z-index: 2;
  }
</style>
</head>
<body>

<div id="menu">
  <h1>üêç Jogo da Cobrinha</h1>
  <input type="text" id="playerName" placeholder="Digite seu nome">
  <br>
  <label>Cor da Cobra: </label>
  <select id="snakeColor">
    <option value="green">Verde</option>
    <option value="blue">Azul</option>
    <option value="purple">Roxo</option>
    <option value="orange">Laranja</option>
    <option value="pink">Rosa</option>
  </select>
  <br>
  <button onclick="startGame()">Iniciar</button>
</div>

<div id="score"></div>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreDisplay = document.getElementById("score");
const menu = document.getElementById("menu");

// Ajusta canvas para a tela
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

const box = 20;
let snake = [];
let food;
let score = 0;
let d;
let game;
let playerName;
let snakeColor;

function startGame() {
  playerName = document.getElementById("playerName").value || "Jogador";
  snakeColor = document.getElementById("snakeColor").value || "green";
  menu.style.display = "none";

  snake = [];
  snake[0] = { x: 9*box, y: 10*box };
  score = 0;
  d = null;

  generateFood();
  if(game) clearInterval(game);
  game = setInterval(draw, 100);
}

// Gera comida em posi√ß√£o aleat√≥ria
function generateFood() {
  food = {
    x: Math.floor(Math.random() * (canvas.width / box)) * box,
    y: Math.floor(Math.random() * (canvas.height / box)) * box
  };
}

// Controles teclado
document.addEventListener("keydown", function(event){
  if (event.keyCode == 37 && d != "RIGHT") d = "LEFT";
  else if (event.keyCode == 38 && d != "DOWN") d = "UP";
  else if (event.keyCode == 39 && d != "LEFT") d = "RIGHT";
  else if (event.keyCode == 40 && d != "UP") d = "DOWN";
});

// Controles swipe para celular
let startX, startY;
document.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
  startY = e.touches[0].clientY;
});
document.addEventListener("touchend", e => {
  let dx = e.changedTouches[0].clientX - startX;
  let dy = e.changedTouches[0].clientY - startY;
  if(Math.abs(dx) > Math.abs(dy)){
    if(dx>0 && d!="LEFT") d="RIGHT";
    else if(dx<0 && d!="RIGHT") d="LEFT";
  } else {
    if(dy>0 && d!="UP") d="DOWN";
    else if(dy<0 && d!="DOWN") d="UP";
  }
});

// Fun√ß√£o de colis√£o
function collision(head,array){
  for(let i=0;i<array.length;i++){
    if(head.x==array[i].x && head.y==array[i].y) return true;
  }
  return false;
}

// Fun√ß√£o principal de desenho
function draw(){
  // Fundo
  ctx.fillStyle="#228B22";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Cobra
  for(let i=0;i<snake.length;i++){
    ctx.fillStyle = (i==0)? snakeColor : "#a5f0a5";
    ctx.beginPath();
    ctx.arc(snake[i].x + box/2, snake[i].y + box/2, box/2, 0, Math.PI*2);
    ctx.fill();
  }

  // Comida
  ctx.fillStyle="red";
  ctx.beginPath();
  ctx.arc(food.x+box/2, food.y+box/2, box/2, 0, Math.PI*2);
  ctx.fill();

  // Posi√ß√£o nova da cabe√ßa
  let snakeX = snake[0].x;
  let snakeY = snake[0].y;

  if(d=="LEFT") snakeX -= box;
  if(d=="UP") snakeY -= box;
  if(d=="RIGHT") snakeX += box;
  if(d=="DOWN") snakeY += box;

  // Comeu comida
  if(snakeX == food.x && snakeY == food.y){
    score++;
    generateFood();
  } else {
    snake.pop();
  }

  let newHead = {x:snakeX, y:snakeY};

  // Colis√£o
  if(snakeX < 0 || snakeY < 0 || snakeX >= canvas.width || snakeY >= canvas.height || collision(newHead,snake)){
    clearInterval(game);
    alert(`üíÄ Game Over, ${playerName}! Pontua√ß√£o: ${score}`);
    menu.style.display="block";
  }

  snake.unshift(newHead);

  // Placar
  scoreDisplay.innerText = `${playerName} | Score: ${score}`;
}
</script>
</body>
</html>
